
<!DOCTYPE html>

<html class="no-js" lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width,initial-scale=1" name="viewport"/>
<link href="../assets/images/favicon.png" rel="icon"/>
<meta content="mkdocs-1.3.1, mkdocs-material-8.5.0" name="generator"/>
<title>7.- Herència, polimorfisme.. - PROGRAMACIÓ 1DAW</title>
<link href="../assets/stylesheets/main.2e8b5541.min.css" rel="stylesheet"/>
<link href="../assets/stylesheets/palette.cbb835fc.min.css" rel="stylesheet"/>
<link crossorigin="" href="https://fonts.gstatic.com" rel="preconnect"/>
<link href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&amp;display=fallback" rel="stylesheet"/>
<style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
<link href="../stylesheet/extra.css" rel="stylesheet"/>
<link href="https://cdnjs.cloudflare.com/ajax/libs/mermaid/7.0.9/mermaid.neutral.css" rel="stylesheet"/>
<script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
</head>
<body data-md-color-accent="none" data-md-color-primary="none" data-md-color-scheme="" dir="ltr">
<input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox"/>
<input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox"/>
<label class="md-overlay" for="__drawer"></label>
<div data-md-component="skip">
<a class="md-skip" href="#tema-7-herencia-polimorfisme-i-interficies">
          Skip to content
        </a>
</div>
<div data-md-component="announce">
</div>
<header class="md-header" data-md-component="header">
<nav aria-label="Header" class="md-header__inner md-grid">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-header__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
<label class="md-header__button md-icon" for="__drawer">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"></path></svg>
</label>
<div class="md-header__title" data-md-component="header-title">
<div class="md-header__ellipsis">
<div class="md-header__topic">
<span class="md-ellipsis">
            PROGRAMACIÓ 1DAW
          </span>
</div>
<div class="md-header__topic" data-md-component="header-topic">
<span class="md-ellipsis">
            
              7.- Herència, polimorfisme..
            
          </span>
</div>
</div>
</div>
<label class="md-header__button md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
</label>
<div class="md-search" data-md-component="search" role="dialog">
<label class="md-search__overlay" for="__search"></label>
<div class="md-search__inner" role="search">
<form class="md-search__form" name="search">
<input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" name="query" placeholder="Search" required="" spellcheck="false" type="text"/>
<label class="md-search__icon md-icon" for="__search">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"></path></svg>
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</label>
<nav aria-label="Search" class="md-search__options">
<button aria-label="Clear" class="md-search__icon md-icon" tabindex="-1" title="Clear" type="reset">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"></path></svg>
</button>
</nav>
</form>
<div class="md-search__output">
<div class="md-search__scrollwrap" data-md-scrollfix="">
<div class="md-search-result" data-md-component="search-result">
<div class="md-search-result__meta">
            Initializing search
          </div>
<ol class="md-search-result__list"></ol>
</div>
</div>
</div>
</div>
</div>
</nav>
</header>
<div class="md-container" data-md-component="container">
<main class="md-main" data-md-component="main">
<div class="md-main__inner md-grid">
<div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation">
<div class="md-sidebar__scrollwrap">
<div class="md-sidebar__inner">
<nav aria-label="Navigation" class="md-nav md-nav--primary md-nav--integrated" data-md-level="0">
<label class="md-nav__title" for="__drawer">
<a aria-label="PROGRAMACIÓ 1DAW" class="md-nav__button md-logo" data-md-component="logo" href=".." title="PROGRAMACIÓ 1DAW">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"></path></svg>
</a>
    PROGRAMACIÓ 1DAW
  </label>
<ul class="md-nav__list" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="..">
        Index
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2001.%20Introducci%C3%B3%20a%20la%20programaci%C3%B3/">
        1.- Introducció programació
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2002.%20Programaci%C3%B3%20Estructurada/">
        2.- Programació Estructurada
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2003.%20El%20llenguatge%20Java/">
        3.- El llenguatge Java
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2004.%20Programaci%C3%B3%20Modular/">
        4.- Programació Modular
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2005.%20Tipus%20compostos%20de%20dades/">
        5.- Tipus Compostos Dades
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2006.%20Programaci%C3%B3%20Orientada%20a%20Objectes/">
        6.- Prog Orientada Objectes
      </a>
</li>
<li class="md-nav__item md-nav__item--active">
<input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox"/>
<label class="md-nav__link md-nav__link--active" for="__toc">
          7.- Herència, polimorfisme..
          <span class="md-nav__icon md-icon"></span>
</label>
<a class="md-nav__link md-nav__link--active" href="./">
        7.- Herència, polimorfisme..
      </a>
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
<label class="md-nav__title" for="__toc">
<span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
<ul class="md-nav__list" data-md-component="toc" data-md-scrollfix="">
<li class="md-nav__item">
<a class="md-nav__link" href="#introduccio">
    Introducció
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#herencia">
    Herència
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#polimorfisme">
    Polimorfisme
  </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="#interficies">
    Interfícies
  </a>
</li>
</ul>
</nav>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2008.%20Entrada%2C%20eixida%20i%20excepcions/">
        8.- Entrada, eixida, excepcions
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2009.%20Gr%C3%A0fics.%20Java%20Swing/">
        9.- Gràfics. Java Swing.
      </a>
</li>
<li class="md-nav__item">
<a class="md-nav__link" href="../Tema%2010.%20Acc%C3%A9s%20a%20dades/">
        10.- Accés a dades
      </a>
</li>
</ul>
</nav>
</div>
</div>
</div>
<div class="md-content" data-md-component="content">
<article class="md-content__inner md-typeset">
<h1 id="tema-7-herencia-polimorfisme-i-interficies">Tema 7. Herència, polimorfisme i interfícies</h1>
<h2 id="introduccio">Introducció</h2>
<p>Un dels mecanismes més potents que incorpora el <strong>paradigma de programació orientada a objectes</strong> són <strong>l’herència</strong> i el <strong>polimorfisme.</strong> </p>
<p>El <strong>primer</strong> ens permet crear una jerarquia de classes relacionades entre sí de tal forma que la quantitat de codi, especialment el codi redundant, es redueix significativament. </p>
<p>El <strong>segon</strong> permet redefinir mètodes de tal forma que realitzen funcions diferents depenent del context en el qual es troben. En altres paraules, el <strong>polimorfisme</strong> és el mecanisme de la programació orientada a objectes que permet que una funció amb el mateix nom realitze tasques diferents depenent de l’objecte des del qual es fa referència. </p>
<p>Finalment també veurem com a les <strong>interfícies</strong> podrem especificar les operacions que haurien de definir-se a les classes que la implementen. Una interfície és un mitjà per a que els objectes no relacionats es comuniquen entres sí. Aquestes són les definicions de mètodes i valors sobre els quals els objectes estan d’acord per cooperar.</p>
<h2 id="herencia">Herència</h2>
<p>En programació orientada a objectes l’herència és un mecanisme que permet potenciar la reutilització i l’extensibilitat en el desenvolupament de programari a banda de <strong>reduir la quantitat de codi redundant.</strong> Aquest mecanisme permet crear noves classes a partir d’una classe o <strong>jerarquia de classes</strong> preexistent (ja comprovades i verificades) evitant d’aquesta forma el redisseny, la modificació i verificació de la part ja implementada. L’herència facilita la creació d’objectes a partir d’altres ja existents i implica que una subclasse obté tot el comportament (mètodes) i finalment els atributs (variables) de la seua superclasse.</p>
<p>En aquest tema veurem com Java implementa el mecanisme de l’herència i quines són les opcions que ens dona.</p>
<p>Suposem el cas en el que disposem de dues classes (amb menys classes resultaria impossible l’herència), una s’anomenarà: classe base, superclasse o classe pare; mentre que l’altra serà la classe derivada, subclasse o classe filla.</p>
<p>Seguint amb l'exemple del tema anterior del <a href="../assets/Tema7/Volcano.zip">Volcano</a> i basant-no en el que varem explicar a l'apartat sobre <strong>herència</strong>, haviem dissenyat una sèrie de classes derivades de <strong>Piroclast</strong> com es pot observar al següent esquema. Aquestes subclasses seran: la <strong>Cendra</strong>, <strong>Lava</strong> i <strong>Roca</strong>. Tots tres són <strong>Piroclasts</strong>, és a dir, tots tenen: posició, direcció, velocitat, color i grandaria i a tots els afecten les lleis de la gravetat però cadascuna de les subclasses tenen certes peculiaritats. La cendra ofereix més resistència a l'aire i de vegades dona la sensació que sura. La lava pot ser des de liquida fins quasi sòlida i els colors varien, finalment les roques a banda de ser sòlides, poden adoptar moltes formes diferents.</p>
<p>La <strong>classe base</strong> en una jerarquia d’herència és la classe que conté els <strong>atributs i mètodes comuns</strong> a totes les classes derivades i és per això que s’evita la redundància del codi que es produiria si haguérem de repetir codi comú a cadascuna de les subclasses, per tant, es podria deduir que una classe derivada és de facto una ampliació de les funcionalitats de la classe base ja que contindrà tant els membres de la classe base com els que s'afegeixen de més a la classe derivada.</p>
<h3 id="declaracio-duna-classe-derivada">Declaració d'una classe derivada</h3>
<p>Per tal de declarar que una classe hereta d’una altra, Java utilitza la paraula reservada <strong>extends</strong>. Si ens basem en el diagrama de classes anteriors, el codi quedaria de la segÚent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Codi de la classe Piroclast</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Cendra</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Codi de la clsse Cendra</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Codi de la classe Lava</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// Codi de la classe Roca</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Respecte de la visibilitat dels membre de la superclasse, les subclasses tindran accés als membres, siguen atributs o mètodes, public o protected mentre que no heretaran els membres privats de la classe pare. </p>
<h3 id="disseny-de-subclasses">Disseny de subclasses</h3>
<p>Dissenyar és adaptar la realitat que es vol representar a un model concret, en el nostre cas els diagrames de classes d’UML. És en aquest pas en el que s’han de prendre les decisions que poden condicionar el resultat final de la nostra aplicació i no sempre és fàcil determinar quines són les relacions que s’han d’establir.  És per això que cal tenir en ment sempre la següent màxima: «La jerarquia de classes més eficient i efectiva és aquella que minimitza el codi al redundant al màxim i simplifica el codi»</p>
<p>Al utilitzar el mecanisme de l’herència en programació orientada a objectes hem d’intentar sempre tindre un màxim de membres a la superclasse i després a les diferents subclasses només aquells membres o atributs que fan de discriminador, és a dir, que diferencien la classe especialitzada (o subclasse) de la classe superior.</p>
<p>A la nostra classe Piroclast ens interessa saber com ja haviem fet al tema anterior: la posició, la direcció, velocitat, color i grandària. Mentre que de les subclasses seria interessant saber de la cendra el seu índex de flotabilitat i que pot volar, de la lava volem saber la densitat i la temperatura mentre que de la roca ens interssa la forma que té.</p>
<p><center>
<div class="mermaid">	classDiagram 
		Piroclast &lt;|-- Cendra
		Piroclast &lt;|-- Lava
		Piroclast &lt;|-- Roca

		Piroclast: posicio
		Piroclast: direccio
		Piroclast: velocitat
		Piroclast: color
		Piroclast: grandaria
		Piroclast: update()
		Piroclast: display()

		Cendra: flotabilitat
		Cendra: volar()

		Lava: densitat
		Lava: temperatura

		Roca: forma
</div>
</center></p>
<p>El codi resultant de les classes d’aquest disseny seria el següent:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio"><div class="tabbed-labels"><label for="__tabbed_1_1">Piroclast</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</input></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">velocitat</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">grandaria</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w">     </span><span class="n">lifeSpan</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">color</span><span class="w">   </span><span class="n">col</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">posicio</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">direccio</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">gravetat</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">PVector</span><span class="w"> </span><span class="n">friccio</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Piroclast</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">update</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">display</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio"><div class="tabbed-labels"><label for="__tabbed_2_1">Cendra</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</input></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Cendra</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">flotabilitat</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">volar</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio"><div class="tabbed-labels"><label for="__tabbed_3_1">Lava</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</input></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Lava</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">densitat</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">temperatura</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<div class="tabbed-set tabbed-alternate" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio"><div class="tabbed-labels"><label for="__tabbed_4_1">Roca</label></div>
<div class="tabbed-content">
<div class="tabbed-block"></div>
</div>
</input></div>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Roca</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Piroclast</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">forma</span><span class="p">;</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Fixa't que ací els atributs de la classe pare o superclasse ja no usen el modificador de visibilitat private sino protected. Si no les subclasses no podrien heretar els atributs de la classe pare.</p>
<p>Del codi anterior es pot extreure la següent informació:</p>
<ul>
<li>Totes les subclasses tindran accés, encara que al codi no estiga als atributs de la superclasse.</li>
<li>Totes les subclasses quan criden als mètodes display i update, executaran el codi que hi ha a la superclasse sempre que no es s’indique el contrari (sobrecàrrega).</li>
<li>Lava i Cendra no tenen forma.</li>
<li>La cendra pot volar.</li>
</ul>
<h3 id="sobrecarrega-de-metodes-a-la-classe-derivada">Sobrecàrrega de mètodes a la classe derivada</h3>
<p>La sobrecàrrega de mètodes és la creació de diversos mètodes amb el mateix nom però amb diferent llista de tipus de paràmetres. Java diferencia entre els mètodes sobrecarregats en base al número i tipus de paràmetres o arguments que té el mètode i no pel tipus que retorna.</p>
<p>classe derivada pot redefinir un mètode de la classe base amb el 
 mateix nom però una llista diferent d’arguments </p>
<p>Si pel contrari tenim un mateix mètode amb el mateix nom i la mateixa signatura (els mateixos paràmetres) el que estem fent es sobreescriure (overridint) i no sobrecarregar (overloading)</p>
<p>Seguint amb l'exemple del nostre volcà, mireu el següent codi:</p>
<h3 id="herencia-publica">Herència pública</h3>
<p>En Java tenim la possibilitat de fer protected (#) private (-) public (+) i package (~) ens determina la visibilitat dels membres d’una classe. Java considera que l’herència és sempre pública i que la classe derivada tindrà per tant accés als membres protected i public de la classe pare però no als membres privats. El fet de poder tindre elements privats a la nostra classe base seria per poder ocultar informació a les classes derivades.</p>
<h3 id="constructors-en-herencia">Constructors en herència</h3>
<p>De la mateixa manera que s’hereten mètodes i atributs també s’hereten els constructors de la classe. D’aquesta forma si declarem un objecte d’una classe derivada, primer s’executa el constructor de la classe base i a continuació s’executa la part de codi de la classe derivada.</p>
<p>Continuant amb la nostra banda de rock farem algunes modificacions. Afegim un constructor parametritzat a la classe instrument que s’encarregarà d’inicialitzar els atributs amo, any, marca i model.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span>
<span class="normal">28</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Instrument</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">amo</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">any</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">marca</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">model</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">clauAfinacio</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Instrument</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Instrument</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strAmo</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iAny</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strMarca</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strModel</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">amo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strAmo</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">any</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iAny</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">marca</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strMarca</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">model</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strModel</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afinar</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Afinar la superclasse"</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">tocar</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Tocar instrument"</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Per l’altre costat a la classe Guitarra hi afegim també un nou constructor (sobrecarregat) amb els paràmetres: amo, any, marca, model, número de cordes i l’amplificador que utilitza.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span>
<span class="normal">21</span>
<span class="normal">22</span>
<span class="normal">23</span>
<span class="normal">24</span>
<span class="normal">25</span>
<span class="normal">26</span>
<span class="normal">27</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Guitarra</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Instrument</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">numCordes</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">ampli</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Guitarra</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Guitarra</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strAmo</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iAny</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strMarca</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strModel</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">iCordes</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">strAmpli</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="kd">super</span><span class="p">(</span><span class="n">strAmo</span><span class="p">,</span><span class="w"> </span><span class="n">iAny</span><span class="p">,</span><span class="w"> </span><span class="n">strMarca</span><span class="p">,</span><span class="w"> </span><span class="n">strModel</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">numCordes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">iCordes</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">ampli</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">strAmpli</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">ferSolo</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">tocar</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Tocar Guitarra"</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afinar</span><span class="w"> </span><span class="p">(</span><span class="kt">char</span><span class="w"> </span><span class="n">clau</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Afinar guitarra en clau "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">clau</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Amb aquest disseny de classes podríem per exemple executar el següent codi</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">main</span><span class="w"> </span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="o">[]</span><span class="w"> </span><span class="n">args</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Guitarra</span><span class="w"> </span><span class="n">lesPaul</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guitarra</span><span class="w"> </span><span class="p">(</span><span class="s">"Vicent"</span><span class="p">,</span><span class="w"> </span><span class="mi">2007</span><span class="p">,</span><span class="w"> </span><span class="s">"Gibson"</span><span class="p">,</span><span class="w"> </span><span class="s">"LesPaul"</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="s">"Marshall"</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">lesPaul</span><span class="p">.</span><span class="na">afinar</span><span class="p">(</span><span class="sc">'R'</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">lesPaul</span><span class="p">.</span><span class="na">tocar</span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Què és el que estaria passant si ferem un traça?</p>
<p>Al crear un objecte ‘gibsonLesPaul’ de la classe guitarra passant-li paràmetres, es cridaria al constructor de la classe guitarra. Aquest el primer que faria seria cridar al constructor de la classe pare utlitzant ‘super’ per indicar-li que ha d’executar el constructor de la superclasse assignant-li d’aquesta forma: l’amo, any, marca i model per immediatament després assignar el nombre de cordes i l’amplificador de la classe derivada.</p>
<p>El mètode super(), es crida només quan s’utilitzen constructors sobrecarregats per tal que execute també el constructor de la superclasse amb paràmetres i no el constructor per defecte que és el que faria si no li diguem el contrari.</p>
<h3 id="exemple">Exemple</h3>
<p>Que executaria el següent codi?</p>
<p><img alt="Exemple Constructors" src="../assets/Tema7/Exemple1.png"/></p>
<p>A més a més, super() també ens permet cridar a mètodes de la classe pare de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">super</span><span class="p">.</span><span class="na">metode</span><span class="p">(</span><span class="n">argumnets</span><span class="p">);</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="conversio-entre-subclasse-i-superclasse">Conversió entre subclasse i superclasse</h3>
<p>De vegades en programació hem de poder convertir entre tipus de dades, aquest mecanisme s’anomena també «cast». Per exemple si tenim un double amb valor 6,8 i volem convertir-lo en un moment determinat de la nostra aplicació a un int, ho fariem de la següent forma:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kt">double</span><span class="w"> </span><span class="n">d</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="mi">8</span><span class="p">;</span><span class="w"></span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="n">d</span><span class="p">;</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Entre objectes també existeix la possibilitat de aplicar aquest mecanisme. Al nostre model de banda de rock, ens podríem trobar amb la següent situació:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Instrument</span><span class="w"> </span><span class="n">inst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Instrument</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="n">Guitarra</span><span class="w"> </span><span class="n">git</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Guitarra</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="n">Teclat</span><span class="w"> </span><span class="n">tcl</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Teclat</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="n">inst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">git</span><span class="p">;</span><span class="w">  </span><span class="c1">// Conversió automàtica</span><span class="w"></span>
<span class="n">inst</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tcl</span><span class="p">;</span><span class="w">  </span><span class="c1">// Conversió automàtica</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="classes-no-derivables-atribut-final">Classes no derivables: atribut final</h3>
<p>Si volem que alguna classe en concret no siga ja més derivable, és a dir, que no volem que es creen més subclasses a partir d’una classe concreta, ho indiquem utilitzant la paraula reservada «final»</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Bateria</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Instrument</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">Bateria</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalToms</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">pedals</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">totalPlats</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">Tocar</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Tocar la bateria"</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afinar</span><span class="w"> </span><span class="p">(</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="n">clau</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">"Afinar la bateria en "</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">clau</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
Amb aquest codi aconseguim que no es puguen crear subclasses de la classe Bateria.</p>
<h2 id="polimorfisme">Polimorfisme</h2>
<p>El polimorfisme (del Grec πολύς, polys, "molt, molts" i μορφή, morphē, "forma, figura") és una característica d'alguns llenguatges de programació que tenen la propietat d'enviar missatges sintàcticament iguals als objectes de diferents tipus. L'únic requisit que han de complir els objectes que s'utilitzen de manera polimòrfica és saber respondre al missatge que se'ls hi envia.</p>
<p>El polimorfisme permet fer referència a altres objectes de classes mitjançant el mateix element de programa i realitzar la mateixa operació de diferents maneres d’acord amb l’objectes al qual es fa referència en cada moment.</p>
<p>Si mirem la nostra banda de rock, l’exemple més clar és el del mètode tocar, tots el nostres instruments poden tocar però cadascun ho fa d’una forma diferent.</p>
<h3 id="lligadura">Lligadura</h3>
<p>El terme lligadura es correspon a l’enllaç que es produeix entre un objecte o instància d’una classe i les seues propietats. Si aquestes propietats són atributs, la lligadura és refereix a la connexió entre l’atribut i la referència a memòria on es trobaria el valor de l’atribut en qüestió mentre que si estem parlant de mètodes, la lligadura és refereix a la connexió entre el nom del mètode que es pretén executar i el codi que executaria.</p>
<p>Per un altre costat, el temps de lligadura és el moment en el que l’atribut s’associa amb el seu valor o que un mètode s’agrupa amb el seu codi corresponent. Aquest temps de lligadura pot ser ‘estàtic’ o ‘dinàmic’. El primer es produeix durant la compilació del programa mentre que la segona es produeix en temps d’execució.</p>
<p>La majoria de llenguatges de programació com C utilitzen la lligadura estàtica en temps de compilació mitjançant l’enllaçador, pel contrari els llenguatges de programació que utilitzen lligadura dinàmica, no determinen quin és el codi que s’executarà en la crida al mètode fins que arriba el moment en temps d’execució i és només en eixe cas en el que es determinarà de totes les possibilitats de codi a executar (polimorfisme) quin és el que s’enllaçarà o lligarà (lligadura efectiva).</p>
<p>Java és un llenguatge orientat a objectes que utilitza la lligadura dinàmica en temps d’execució amb l’excepció dels mètodes static o final que utilitzen lligadura estàtica.</p>
<h3 id="classes-i-metodes-abstractes">Classes i mètodes abstractes</h3>
<p>Les classes i mètodes abstractes són un «fenomen» que es dona en algunes de les generalitzacions que ens apareixen quan analitzem una realitat des del punt de vista de la programació orientada a objectes. És a dir, l’abstracció com a tècnica en POO només es pot donar en l’herència entre classes, concretament a les classes més altes de la jerarquia.</p>
<p>Una classe abstracta és aquella de la qual mai s’instanciarà cap objecte. Per exemple Instrument a la nostra banda de rock on o s’instancia una guitarra, un baix o una bateria però mai un instrument com a tal.</p>
<p>A nivell de codi l’únic canvi que es produeix és que a la classe general «Instrument» se li afegeix la paraula reservada abstract com a modificador de comportament de la classe.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Instrument</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Normalment els mètodes d’una classe abstracta també seran abstractes.</p>
<p>Al convertir la classe Instrument a abstracta ja no la podríem instanciar és a dir, no podrem crear cap objecte de la classe Instrument, és a dir, no podrem en cap moment fer Instrument ins = new Instrument(); ja que ens donaria error de compilació però en canvi, si podríem fer Instrument ins = new Guitarra(); ja que la classe Guitarra no és abstracta i una Guitarra és, segons el nostre model, un instrument.</p>
<p><strong>Mètodes Abstractes</strong>
Un mètode abstracte és un mètode que defineix un comportament o funcionalitat concreta però no especifica la seua implementació i ha de ser la classe filla la que implemente el mètode.</p>
<p>En altres paraules, a la classe para o superclasse podem tindre mètode tocar, public void abstract tocar(), que no tindra cap codi a la seua implementació si no que serà la classe filla o subclasse, guitarra per exemple, la que incorpore el codi dins del seu mètode public void tocar(). Fixeu-se que aquest últim ja no porta la paraula reservada «abstract»</p>
<p>La implementació de mètodes abstractes per part de les classes filles en una jerarquia utilitzen la lligadura dinàmica ja que no es possible determinar el codi que s’ha d’executar en temps de compilació.</p>
<h3 id="us-del-polimorfisme">Ús del polimorfisme</h3>
<p>Arribats a aquest punt podem treure les  següents conclusions: que el polimorfisme ens permet que diferents objectes responguen de manera diferent al mateix missatge (mètode amb el mateix nom) i que aquesta diferenciació de quin codi executar ho fa el compilador amb lligadura dinàmica (en temps d’execució i no de compilació) </p>
<p>Per usar el polimorfisme a Java hem de seguir les següents regles:</p>
<ol>
<li>Crear una jerarquia de classes amb les operacions importants definies per els mètodes membre declarades com abstractes a la base.</li>
<li>Les implementacions específiques dels mètodes abstractes s’han de fer a les classes derivades.</li>
<li>Les instàncies d’aquestes classes s’usen mitjançant una referència a la base amb lligadura dinàmica la qual és l’essència del polimorfisme a Java</li>
</ol>
<p>Finalment,en realitat no és necessari declarar abstractes els mètodes a la classe base si després es redefineixen amb la mateixa signatura (nom més paràmetres) a la classe derivada.</p>
<h3 id="avantatges-del-polimorfisme">Avantatges del polimorfisme</h3>
<p>El polimorfisme fa el seu sistema més flexible, sense perdre cap dels avantatges de la compilació estàtica de tipus que tenen lloc en temps de compilació; tal és el cas de Java.</p>
<p>Les aplicacions més freqüents del polimorfisme són:
- Especialització de classes derivades. És a dir, especialitzar classes que han estat definits des; per exemple: Quadrat és una especialització de la classe Rectangle perquè qualsevol quadrat és un tipus de rectangle; aquesta classe de polimorfisme augmenta la eficiència de la subclasse, mentre conserva un alt grau de flexibilitat i permet un mitjà uniforme de manejar rectangles i quadrats.
- Estructures de dades heterogenis. De vegades és útil poder manipular conjunts similars dors d'objectes; amb el polimorfisme es poden crear i gestionar fàcilment estructures de dades heterogenis que són fàcils de dissenyar i dibuixar, sense perdre la comprovació de tipus dels elements utilitzats.
- Gestió d'una jerarquia de classes. Són col·leccions de classes altament estructurades
amb relacions d'herència que es poden estendre fàcilment.</p>
<h3 id="metodes-no-derivables-atribut-final">Mètodes no derivables: atribut final</h3>
<p>Al context de l’herència, la paraula reservada final, s’utilitza per protegir la redefinició dels mètodes de la classe base; un mètode que té l’atribut final, no pot tornar a definir-se a la o les classes derivades</p>
<h2 id="interficies">Interfícies</h2>
<p>Una interfície en Java, és sintàcticament similar a una classe abstracta, en la qual pot especificar un o més mètodes que no tenen cos. Aquests mètodes han de ser implementats per una classe perquè es defineixen les seues accions.</p>
<p>Per tant, una interfície especifica què s'ha de fer, però no com fer-ho. Una vegada que es defineix una interfície, qualsevol quantitat de classes pot implementar-la. A més, una classe pot implementar qualsevol quantitat d'interfícies.</p>
<p>Per implementar una interfície, una classe ha de proporcionar cossos (implementacions) per als mètodes descrits per la interfície. Cada classe és lliure de determinar els detalls de la seva pròpia implementació. Dues classes poden implementar la mateixa interfície de diferents maneres, però cada classe encara admet el mateix conjunt de mètodes. Per tant, el codi que té. Herència, polimorfisme i Interfícies coneixement de la interfície pot usar objectes de qualsevol classe, ja que la interfície amb aquests objectes és la mateixa.</p>
<h3 id="implementacio-duna-interficie">Implementació d'una interfície</h3>
<p>La interfície especifica el comportament comú que tenen un conjunt de dades el qual es realitza en cadascuna d’elles i es coneix també com a implementació d’una interfície. La sintaxis és similar a la derivació o extensió d’una classe amb la paraula reservada implements en llo d’extends.</p>
<p><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">Class</span><span class="w"> </span><span class="n">nomClasse</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">nomInterficie</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="c1">// definició d’atributs</span><span class="w"></span>
<span class="c1">// implementació dels mètodes de la classe</span><span class="w"></span>
<span class="c1">// implementació dels mètodes de la interfícies</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
La classe que implementa la interfície ha d’especificar el codi (la implementació) de cadascun dels mètodes, en cas de no fer-ho, la classe es. Herència, polimorfisme i Interfícies converteix en abstracta i com a tal s’ha de declarar. És a dir, si una classe implementa una interfície, està obligada a implementar tots els seus mètodes.</p>
<p>Per tal d’il·lustrar amb un exemple sobre una interfície, utilitzarem un comandament a distància de qualsevol dispositiu electrònic. Es suposa que des d’un comandament a distància podrem: encendre i apagar el dispositiu, pujar i baixar el volum, silenciar etc..</p>
<p>La nostra interfície creada amb Java podria ser com la següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span>
<span class="normal">3</span>
<span class="normal">4</span>
<span class="normal">5</span>
<span class="normal">6</span>
<span class="normal">7</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Comandament</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">engegar</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">apagar</span><span class="w"> </span><span class="p">();</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujarVolum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixarVolum</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">decrement</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">silenciar</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<p>Els mètodes declarats ací a la interfície Comandament deurien ser autoexplicatoris. Hem inclòs només unes poques de les múltiples accions que es poden realitzar amb un comandament a distància d’un dispositiu electrònic i encara se li podrien afegir algunes més ben segur. </p>
<p>No hi ha definició de cap dels mètodes ací, Els mètodes declarats en una interfície són sempre abstractes i sempre públics per defecte. Ara qualsevol classe que necessite de l’ús de la funcionalitat proveïda per Comandament només ha de delcarar que implementa la interficie a més a més de definir cadascun dels mètodes que la formen. </p>
<p>Posem per exemple una televisió, el codi Java seria el següent:</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 1</span>
<span class="normal"> 2</span>
<span class="normal"> 3</span>
<span class="normal"> 4</span>
<span class="normal"> 5</span>
<span class="normal"> 6</span>
<span class="normal"> 7</span>
<span class="normal"> 8</span>
<span class="normal"> 9</span>
<span class="normal">10</span>
<span class="normal">11</span>
<span class="normal">12</span>
<span class="normal">13</span>
<span class="normal">14</span>
<span class="normal">15</span>
<span class="normal">16</span>
<span class="normal">17</span>
<span class="normal">18</span>
<span class="normal">19</span>
<span class="normal">20</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TV</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">comandament</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">engegar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Codi necessari per engegar la televisió</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">apagar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Codi necessari per apagar la televisió</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">pujaVolum</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Codi necessari per incrementar el volum en increment</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">baixaVolum</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">increment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Codi necessari per disminuir el volum en increment</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">silenciar</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// Codi necessari per silenciar la televisió</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="jerarquia-dinteficies">Jerarquia d'intefícies</h3>
<p>Les interfícies també es poden organitzar de forma jerarquica de manera que els mètodes siguen heredats</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="n">interficie</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">interficie2</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">interficie3</span><span class="p">...</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="herencia-de-classes-i-implementacio-dinterficies">Herència de classes i implementació d'interfícies</h3>
<p>es interfícies no són classes ja que especifiquen un comportament mitjançant mètodes per la classe que els implemente; per això, una classe pot heretar de la seua classe base i al mateix temps implementar una interfície. Per exemple si tenim una classe base anomenada Electrodomèstic de la qual hereten una sèrie de classes com podrien ser: Televisió, DVD, Microones, Forn, Nevera etc..i a més a més també disposem d’una interfície Comandament,  podríem crear una aplicació en la que la televisió herete de la classe general electrodomèstic i a banda implemente la interfície comandament com hem vist abans.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Televisio</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Electrodomestic</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">comandament</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div></td></tr></table></div>
<h3 id="classes-internes">Classes internes</h3>
<p>Una classe interna és una classe que es declara dintre d’una altra classe.</p>
<canvas data-processing-sources="assets/Tema8/jocDomino.pde"></canvas>
</article>
</div>
</div>
</main>
<footer class="md-footer">
<nav aria-label="Footer" class="md-footer__inner md-grid">
<a aria-label="Previous: 6.- Prog Orientada Objectes" class="md-footer__link md-footer__link--prev" href="../Tema%2006.%20Programaci%C3%B3%20Orientada%20a%20Objectes/" rel="prev">
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"></path></svg>
</div>
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Previous
              </span>
              6.- Prog Orientada Objectes
            </div>
</div>
</a>
<a aria-label="Next: 8.- Entrada, eixida, excepcions" class="md-footer__link md-footer__link--next" href="../Tema%2008.%20Entrada%2C%20eixida%20i%20excepcions/" rel="next">
<div class="md-footer__title">
<div class="md-ellipsis">
<span class="md-footer__direction">
                Next
              </span>
              8.- Entrada, eixida, excepcions
            </div>
</div>
<div class="md-footer__button md-icon">
<svg viewbox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"></path></svg>
</div>
</a>
</nav>
<div class="md-footer-meta md-typeset">
<div class="md-footer-meta__inner md-grid">
<div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
      Material for MkDocs
    </a>
</div>
</div>
</div>
</footer>
</div>
<div class="md-dialog" data-md-component="dialog">
<div class="md-dialog__inner md-typeset"></div>
</div>
<script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "toc.integrate"], "search": "../assets/javascripts/workers/search.ecf98df9.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
<script src="../assets/javascripts/bundle.48f2be22.min.js"></script>
<script src="../js/mathjax.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
<script "="" src="https://cdnjs.cloudflare.com/ajax/libs/processing.js/1.6.0/processing.min.js"></script>
<script>mermaid.initialize({
    theme: "forest"
});</script></body>
</html>